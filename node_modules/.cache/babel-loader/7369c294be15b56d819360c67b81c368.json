{"remainingRequest":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\jf_front_end\\src\\views\\demo\\playground\\add-routes\\routes.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\workspace\\jf_front_end\\src\\views\\demo\\playground\\add-routes\\routes.vue","mtime":1590460801191},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJGOi93b3Jrc3BhY2UvamZfZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkY6L3dvcmtzcGFjZS9qZl9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGZyYW1lSW5Sb3V0ZXMgfSBmcm9tICdAL3JvdXRlci9yb3V0ZXMnOwppbXBvcnQgbGF5b3V0SGVhZGVyQXNpZGUgZnJvbSAnQC9sYXlvdXQvaGVhZGVyLWFzaWRlJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJycsCiAgICAgIHNldHRpbmc6IFt7CiAgICAgICAgdGl0bGU6ICfov73liqDpobXpnaIgMScsCiAgICAgICAgbmFtZTogJ2FkZC1yb3V0ZXMtMScsCiAgICAgICAgcGF0aDogJ2FkZC1yb3V0ZXMvMScsCiAgICAgICAgY29tcG9uZW50OiAnMScKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn6L+95Yqg6aG16Z2iIDInLAogICAgICAgIG5hbWU6ICdhZGQtcm91dGVzLTInLAogICAgICAgIHBhdGg6ICdhZGQtcm91dGVzLzInLAogICAgICAgIGNvbXBvbmVudDogJzInCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+i/veWKoOmhtemdoiAzJywKICAgICAgICBuYW1lOiAnYWRkLXJvdXRlcy0zJywKICAgICAgICBwYXRoOiAnYWRkLXJvdXRlcy8zJywKICAgICAgICBjb21wb25lbnQ6ICczJwogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCdkMmFkbWluL21lbnUnLCBbJ2hlYWRlciddKSksIHt9LCB7CiAgICBkYXRhVmlldzogZnVuY3Rpb24gZGF0YVZpZXcoKSB7CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmcsIG51bGwsIDIpOwogICAgfQogIH0pLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwTXV0YXRpb25zKHsKICAgIHBhZ2VJbml0OiAnZDJhZG1pbi9wYWdlL2luaXQnLAogICAgaGVhZGVyU2V0OiAnZDJhZG1pbi9tZW51L2hlYWRlclNldCcKICB9KSksIHt9LCB7CiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKF9yZWYpIHsKICAgICAgdmFyIHRpdGxlID0gX3JlZi50aXRsZSwKICAgICAgICAgIG5hbWUgPSBfcmVmLm5hbWUsCiAgICAgICAgICBwYXRoID0gX3JlZi5wYXRoLAogICAgICAgICAgX2NvbXBvbmVudCA9IF9yZWYuY29tcG9uZW50OwogICAgICAvLyB2dWUgcm91dGVyIOeahOiuvuiuoeaaguaXtuS4jeiDveaUr+aMgeWcqOi3r+eUseekuuS+i+S4iuiuv+mXruWKqOaAgea3u+WKoOeahOi3r+eUsQogICAgICAvLyDnm67liY3lj6/ooYznmoTop6PlhrPmlrnms5XmmK/oh6rooYznu7TmiqTkuIDkuKrlrZjlgqjot6/nlLHmlbDmja7nmoTkvY3nva4KICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzEyMzQKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzE4NTkKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzE5NTUKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzI0NTQKICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzIyODAKICAgICAgLy8g5omA5Lul5pqC5pe25YWI5LiN5YGa5a+56Lev55Sx5bey57uP5a2Y5Zyo55qE5Yik5patCiAgICAgIHZhciByb3V0ZSA9IFt7CiAgICAgICAgcGF0aDogJy9kZW1vL3BsYXlncm91bmQnLAogICAgICAgIGNvbXBvbmVudDogbGF5b3V0SGVhZGVyQXNpZGUsCiAgICAgICAgY2hpbGRyZW46IFt7CiAgICAgICAgICBwYXRoOiBwYXRoLAogICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgICAgICByZXR1cm4gaW1wb3J0KCdAL3ZpZXdzL2RlbW8vcGxheWdyb3VuZC9hZGQtcm91dGVzL2FsdGVybmF0ZXMvJyArIF9jb21wb25lbnQgKyAnLnZ1ZScpOwogICAgICAgICAgfSwKICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgdGl0bGU6IHRpdGxlCiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfV07CiAgICAgIHRoaXMuJHJvdXRlci5hZGRSb3V0ZXMocm91dGUpOyAvLyDmm7TmlrDmoIfnrb7pobXmsaAKCiAgICAgIHRoaXMucGFnZUluaXQoW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmcmFtZUluUm91dGVzKSwgcm91dGUpKTsgLy8g5ryU56S65pu05paw6I+c5Y2VCgogICAgICB2YXIgbWVudUdyb3VwID0gewogICAgICAgIHRpdGxlOiAn5Li05pe26I+c5Y2VJywKICAgICAgICBpY29uOiAncGx1cy1zcXVhcmUnLAogICAgICAgIGNoaWxkcmVuOiBbXQogICAgICB9OwogICAgICB2YXIgbWVudSA9IHsKICAgICAgICBwYXRoOiAiL2RlbW8vcGxheWdyb3VuZC8iLmNvbmNhdChwYXRoKSwKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgaWNvbjogJ2ZpbGUtbycKICAgICAgfTsKICAgICAgdmFyIGhlYWRlciA9IGNsb25lRGVlcCh0aGlzLmhlYWRlcik7CiAgICAgIHZhciBtZW51R3JvdXBJbmRleCA9IGhlYWRlci5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS50aXRsZSA9PT0gbWVudUdyb3VwLnRpdGxlOwogICAgICB9KTsgLy8g5aaC5p6c6aG25qCP6I+c5Y2V5bey57uP5pyJ6L+Z5Liq57uE77yM5bCx5Zyo57uE6YeM5re75Yqg6aG555uu77yM5Y+N5LmL5paw5bu65LiA5Liq6I+c5Y2V57uECgogICAgICBpZiAobWVudUdyb3VwSW5kZXggPj0gMCkgewogICAgICAgIGhlYWRlclttZW51R3JvdXBJbmRleF0uY2hpbGRyZW4ucHVzaChtZW51KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtZW51R3JvdXAuY2hpbGRyZW4ucHVzaChtZW51KTsKICAgICAgICBoZWFkZXIucHVzaChtZW51R3JvdXApOwogICAgICB9CgogICAgICB0aGlzLmhlYWRlclNldChoZWFkZXIpOyAvLyDot7PovawKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH0pOwogICAgfQogIH0pCn07"},{"version":3,"sources":["routes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAA,SAAA,QAAA,QAAA;AACA,SAAA,QAAA,EAAA,YAAA,QAAA,MAAA;AACA,SAAA,aAAA,QAAA,iBAAA;AACA,OAAA,iBAAA,MAAA,uBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,SAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,SAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,IAAA,EAAA,cAAA;AAAA,QAAA,SAAA,EAAA;AAAA,OAHA;AAFA,KAAA;AAQA,GAVA;AAWA,EAAA,QAAA,kCACA,QAAA,CAAA,cAAA,EAAA,CACA,QADA,CAAA,CADA;AAIA,IAAA,QAJA,sBAIA;AACA,aAAA,IAAA,CAAA,SAAA,CAAA,KAAA,OAAA,EAAA,IAAA,EAAA,CAAA,CAAA;AACA;AANA,IAXA;AAmBA,EAAA,OAAA,kCACA,YAAA,CAAA;AACA,IAAA,QAAA,EAAA,mBADA;AAEA,IAAA,SAAA,EAAA;AAFA,GAAA,CADA;AAKA,IAAA,OALA,yBAKA;AAAA,UAAA,KAAA,QAAA,KAAA;AAAA,UAAA,IAAA,QAAA,IAAA;AAAA,UAAA,IAAA,QAAA,IAAA;AAAA,UAAA,UAAA,QAAA,SAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAA,KAAA,GAAA,CACA;AACA,QAAA,IAAA,EAAA,kBADA;AAEA,QAAA,SAAA,EAAA,iBAFA;AAGA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,IAAA,EAAA,IAFA;AAGA,UAAA,SAAA,EAAA;AAAA,mBAAA,OAAA,mDAAA,UAAA,GAAA,MAAA,CAAA;AAAA,WAHA;AAIA,UAAA,IAAA,EAAA;AACA,YAAA,KAAA,EAAA;AADA;AAJA,SADA;AAHA,OADA,CAAA;AAgBA,WAAA,OAAA,CAAA,SAAA,CAAA,KAAA,EAzBA,CA0BA;;AACA,WAAA,QAAA,8BACA,aADA,GAEA,KAFA,GA3BA,CA+BA;;AACA,UAAA,SAAA,GAAA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,IAAA,EAAA,aAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA;AAKA,UAAA,IAAA,GAAA;AACA,QAAA,IAAA,6BAAA,IAAA,CADA;AAEA,QAAA,KAAA,EAAA,KAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA;AAKA,UAAA,MAAA,GAAA,SAAA,CAAA,KAAA,MAAA,CAAA;AACA,UAAA,cAAA,GAAA,MAAA,CAAA,SAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,KAAA,KAAA,SAAA,CAAA,KAAA;AAAA,OAAA,CAAA,CA3CA,CA4CA;;AACA,UAAA,cAAA,IAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,cAAA,CAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA,MAEA;AACA,QAAA,SAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,SAAA;AACA;;AACA,WAAA,SAAA,CAAA,MAAA,EAnDA,CAoDA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA;AA3DA;AAnBA,CAAA","sourcesContent":["<template>\r\n  <d2-container>\r\n    <el-alert\r\n      title=\"由于演示功能特殊，请注意在需要时刷新您的浏览器（以重置路由设置）查看效果\"\r\n      type=\"warning\"\r\n      show-icon/>\r\n    <d2-highlight :code=\"dataView\"/>\r\n    <el-form label-position=\"top\">\r\n      <el-form-item label=\"创建路由（你可以假设上面是接口数据）\">\r\n        <el-button-group>\r\n          <el-button\r\n            v-for=\"item in setting\"\r\n            :key=\"item.component\"\r\n            @click=\"onClick(item)\">\r\n            {{item.title}}\r\n          </el-button>\r\n        </el-button-group>\r\n      </el-form-item>\r\n    </el-form>\r\n  </d2-container>\r\n</template>\r\n\r\n<script>\r\nimport { cloneDeep } from 'lodash'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport { frameInRoutes } from '@/router/routes'\r\nimport layoutHeaderAside from '@/layout/header-aside'\r\nexport default {\r\n  data () {\r\n    return {\r\n      title: '',\r\n      setting: [\r\n        { title: '追加页面 1', name: 'add-routes-1', path: 'add-routes/1', component: '1' },\r\n        { title: '追加页面 2', name: 'add-routes-2', path: 'add-routes/2', component: '2' },\r\n        { title: '追加页面 3', name: 'add-routes-3', path: 'add-routes/3', component: '3' }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('d2admin/menu', [\r\n      'header'\r\n    ]),\r\n    dataView () {\r\n      return JSON.stringify(this.setting, null, 2)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      pageInit: 'd2admin/page/init',\r\n      headerSet: 'd2admin/menu/headerSet'\r\n    }),\r\n    onClick ({ title, name, path, component }) {\r\n      // vue router 的设计暂时不能支持在路由示例上访问动态添加的路由\r\n      // 目前可行的解决方法是自行维护一个存储路由数据的位置\r\n      // https://github.com/vuejs/vue-router/issues/1234\r\n      // https://github.com/vuejs/vue-router/issues/1859\r\n      // https://github.com/vuejs/vue-router/issues/1955\r\n      // https://github.com/vuejs/vue-router/issues/2454\r\n      // https://github.com/vuejs/vue-router/issues/2280\r\n      // 所以暂时先不做对路由已经存在的判断\r\n      const route = [\r\n        {\r\n          path: '/demo/playground',\r\n          component: layoutHeaderAside,\r\n          children: [\r\n            {\r\n              path,\r\n              name,\r\n              component: () => import('@/views/demo/playground/add-routes/alternates/' + component + '.vue'),\r\n              meta: {\r\n                title\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n      this.$router.addRoutes(route)\r\n      // 更新标签页池\r\n      this.pageInit([\r\n        ...frameInRoutes,\r\n        ...route\r\n      ])\r\n      // 演示更新菜单\r\n      const menuGroup = {\r\n        title: '临时菜单',\r\n        icon: 'plus-square',\r\n        children: []\r\n      }\r\n      const menu = {\r\n        path: `/demo/playground/${path}`,\r\n        title,\r\n        icon: 'file-o'\r\n      }\r\n      const header = cloneDeep(this.header)\r\n      const menuGroupIndex = header.findIndex(e => e.title === menuGroup.title)\r\n      // 如果顶栏菜单已经有这个组，就在组里添加项目，反之新建一个菜单组\r\n      if (menuGroupIndex >= 0) {\r\n        header[menuGroupIndex].children.push(menu)\r\n      } else {\r\n        menuGroup.children.push(menu)\r\n        header.push(menuGroup)\r\n      }\r\n      this.headerSet(header)\r\n      // 跳转\r\n      this.$router.push({ name })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/demo/playground/add-routes"}]}