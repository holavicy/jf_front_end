{"remainingRequest":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\jf_front_end\\node_modules\\eslint-loader\\index.js??ref--13-0!F:\\workspace\\jf_front_end\\src\\components\\d2-highlight\\libs\\htmlFormat.js","dependencies":[{"path":"F:\\workspace\\jf_front_end\\src\\components\\d2-highlight\\libs\\htmlFormat.js","mtime":1590460801072},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwoKLyogZXNsaW50LWRpc2FibGUgKi8KLy8g5Yqf6IO9Ci8vIOWwhkhUTUzlrZfnrKbkuLLmoLzlvI/ljJYKdmFyIGZvcm1hdCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBzdHlsZV9odG1sKGh0bWxfc291cmNlLCBpbmRlbnRfc2l6ZSwgaW5kZW50X2NoYXJhY3RlciwgbWF4X2NoYXIpIHsKICAgIHZhciBQYXJzZXIsIG11bHRpX3BhcnNlcjsKCiAgICBmdW5jdGlvbiBQYXJzZXIoKSB7CiAgICAgIHRoaXMucG9zID0gMDsKICAgICAgdGhpcy50b2tlbiA9ICcnOwogICAgICB0aGlzLmN1cnJlbnRfbW9kZSA9ICdDT05URU5UJzsKICAgICAgdGhpcy50YWdzID0gewogICAgICAgIHBhcmVudDogJ3BhcmVudDEnLAogICAgICAgIHBhcmVudGNvdW50OiAxLAogICAgICAgIHBhcmVudDE6ICcnCiAgICAgIH07CiAgICAgIHRoaXMudGFnX3R5cGUgPSAnJzsKICAgICAgdGhpcy50b2tlbl90ZXh0ID0gdGhpcy5sYXN0X3Rva2VuID0gdGhpcy5sYXN0X3RleHQgPSB0aGlzLnRva2VuX3R5cGUgPSAnJzsKICAgICAgdGhpcy5VdGlscyA9IHsKICAgICAgICB3aGl0ZXNwYWNlOiAiXG5cclx0ICIuc3BsaXQoJycpLAogICAgICAgIHNpbmdsZV90b2tlbjogJ2JyLGlucHV0LGxpbmssbWV0YSwhZG9jdHlwZSxiYXNlZm9udCxiYXNlLGFyZWEsaHIsd2JyLHBhcmFtLGltZyxpc2luZGV4LD94bWwsZW1iZWQnLnNwbGl0KCcsJyksCiAgICAgICAgZXh0cmFfbGluZXJzOiAnaGVhZCxib2R5LC9odG1sJy5zcGxpdCgnLCcpLAogICAgICAgIGluX2FycmF5OiBmdW5jdGlvbiBpbl9hcnJheSh3aGF0LCBhcnIpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh3aGF0ID09PSBhcnJbaV0pIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLmdldF9jb250ZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBjaGFyID0gJyc7CiAgICAgICAgdmFyIGNvbnRlbnQgPSBbXTsKICAgICAgICB2YXIgc3BhY2UgPSBmYWxzZTsKCiAgICAgICAgd2hpbGUgKHRoaXMuaW5wdXQuY2hhckF0KHRoaXMucG9zKSAhPT0gJzwnKSB7CiAgICAgICAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID8gY29udGVudC5qb2luKCcnKSA6IFsnJywgJ1RLX0VPRiddOwogICAgICAgICAgfQoKICAgICAgICAgIGNoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICB0aGlzLnBvcysrOwogICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQrKzsKCiAgICAgICAgICBpZiAodGhpcy5VdGlscy5pbl9hcnJheShjaGFyLCB0aGlzLlV0aWxzLndoaXRlc3BhY2UpKSB7CiAgICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCkgewogICAgICAgICAgICAgIHNwYWNlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQtLTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IGVsc2UgaWYgKHNwYWNlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVfY2hhcl9jb3VudCA+PSB0aGlzLm1heF9jaGFyKSB7CiAgICAgICAgICAgICAgY29udGVudC5wdXNoKCdcbicpOwoKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5kZW50X2xldmVsOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh0aGlzLmluZGVudF9zdHJpbmcpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQgPSAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnRlbnQucHVzaCgnICcpOwogICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50Kys7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHNwYWNlID0gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgY29udGVudC5wdXNoKGNoYXIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID8gY29udGVudC5qb2luKCcnKSA6ICcnOwogICAgICB9OwoKICAgICAgdGhpcy5nZXRfc2NyaXB0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBjaGFyID0gJyc7CiAgICAgICAgdmFyIGNvbnRlbnQgPSBbXTsKICAgICAgICB2YXIgcmVnX21hdGNoID0gbmV3IFJlZ0V4cCgnXDxcL3NjcmlwdCcgKyAnXD4nLCAnaWdtJyk7CiAgICAgICAgcmVnX21hdGNoLmxhc3RJbmRleCA9IHRoaXMucG9zOwogICAgICAgIHZhciByZWdfYXJyYXkgPSByZWdfbWF0Y2guZXhlYyh0aGlzLmlucHV0KTsKICAgICAgICB2YXIgZW5kX3NjcmlwdCA9IHJlZ19hcnJheSA/IHJlZ19hcnJheS5pbmRleCA6IHRoaXMuaW5wdXQubGVuZ3RoOwoKICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmRfc2NyaXB0KSB7CiAgICAgICAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID8gY29udGVudC5qb2luKCcnKSA6IFsnJywgJ1RLX0VPRiddOwogICAgICAgICAgfQoKICAgICAgICAgIGNoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICB0aGlzLnBvcysrOwogICAgICAgICAgY29udGVudC5wdXNoKGNoYXIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID8gY29udGVudC5qb2luKCcnKSA6ICcnOwogICAgICB9OwoKICAgICAgdGhpcy5yZWNvcmRfdGFnID0gZnVuY3Rpb24gKHRhZykgewogICAgICAgIGlmICh0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10pIHsKICAgICAgICAgIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSsrOwogICAgICAgICAgdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXV0gPSB0aGlzLmluZGVudF9sZXZlbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy50YWdzW3RhZyArICdjb3VudCddID0gMTsKICAgICAgICAgIHRoaXMudGFnc1t0YWcgKyB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J11dID0gdGhpcy5pbmRlbnRfbGV2ZWw7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRhZ3NbdGFnICsgdGhpcy50YWdzW3RhZyArICdjb3VudCddICsgJ3BhcmVudCddID0gdGhpcy50YWdzLnBhcmVudDsKICAgICAgICB0aGlzLnRhZ3MucGFyZW50ID0gdGFnICsgdGhpcy50YWdzW3RhZyArICdjb3VudCddOwogICAgICB9OwoKICAgICAgdGhpcy5yZXRyaWV2ZV90YWcgPSBmdW5jdGlvbiAodGFnKSB7CiAgICAgICAgaWYgKHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSkgewogICAgICAgICAgdmFyIHRlbXBfcGFyZW50ID0gdGhpcy50YWdzLnBhcmVudDsKCiAgICAgICAgICB3aGlsZSAodGVtcF9wYXJlbnQpIHsKICAgICAgICAgICAgaWYgKHRhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSA9PT0gdGVtcF9wYXJlbnQpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGVtcF9wYXJlbnQgPSB0aGlzLnRhZ3NbdGVtcF9wYXJlbnQgKyAncGFyZW50J107CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlbXBfcGFyZW50KSB7CiAgICAgICAgICAgIHRoaXMuaW5kZW50X2xldmVsID0gdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXV07CiAgICAgICAgICAgIHRoaXMudGFncy5wYXJlbnQgPSB0aGlzLnRhZ3NbdGVtcF9wYXJlbnQgKyAncGFyZW50J107CiAgICAgICAgICB9CgogICAgICAgICAgZGVsZXRlIHRoaXMudGFnc1t0YWcgKyB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10gKyAncGFyZW50J107CiAgICAgICAgICBkZWxldGUgdGhpcy50YWdzW3RhZyArIHRoaXMudGFnc1t0YWcgKyAnY291bnQnXV07CgogICAgICAgICAgaWYgKHRoaXMudGFnc1t0YWcgKyAnY291bnQnXSA9PSAxKSB7CiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnRhZ3NbdGFnICsgJ2NvdW50J10tLTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLmdldF90YWcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNoYXIgPSAnJzsKICAgICAgICB2YXIgY29udGVudCA9IFtdOwogICAgICAgIHZhciBzcGFjZSA9IGZhbHNlOwoKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAodGhpcy5wb3MgPj0gdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID8gY29udGVudC5qb2luKCcnKSA6IFsnJywgJ1RLX0VPRiddOwogICAgICAgICAgfQoKICAgICAgICAgIGNoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICB0aGlzLnBvcysrOwogICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQrKzsKCiAgICAgICAgICBpZiAodGhpcy5VdGlscy5pbl9hcnJheShjaGFyLCB0aGlzLlV0aWxzLndoaXRlc3BhY2UpKSB7CiAgICAgICAgICAgIHNwYWNlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQtLTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNoYXIgPT09ICInIiB8fCBjaGFyID09PSAnIicpIHsKICAgICAgICAgICAgaWYgKCFjb250ZW50WzFdIHx8IGNvbnRlbnRbMV0gIT09ICchJykgewogICAgICAgICAgICAgIGNoYXIgKz0gdGhpcy5nZXRfdW5mb3JtYXR0ZWQoY2hhcik7CiAgICAgICAgICAgICAgc3BhY2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNoYXIgPT09ICc9JykgewogICAgICAgICAgICBzcGFjZSA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjb250ZW50Lmxlbmd0aCAmJiBjb250ZW50W2NvbnRlbnQubGVuZ3RoIC0gMV0gIT09ICc9JyAmJiBjaGFyICE9PSAnPicgJiYgc3BhY2UpIHsKICAgICAgICAgICAgaWYgKHRoaXMubGluZV9jaGFyX2NvdW50ID49IHRoaXMubWF4X2NoYXIpIHsKICAgICAgICAgICAgICB0aGlzLnByaW50X25ld2xpbmUoZmFsc2UsIGNvbnRlbnQpOwogICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50ID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb250ZW50LnB1c2goJyAnKTsKICAgICAgICAgICAgICB0aGlzLmxpbmVfY2hhcl9jb3VudCsrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzcGFjZSA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnRlbnQucHVzaChjaGFyKTsKICAgICAgICB9IHdoaWxlIChjaGFyICE9PSAnPicpOwoKICAgICAgICB2YXIgdGFnX2NvbXBsZXRlID0gY29udGVudC5qb2luKCcnKTsKICAgICAgICB2YXIgdGFnX2luZGV4OwoKICAgICAgICBpZiAodGFnX2NvbXBsZXRlLmluZGV4T2YoJyAnKSAhPSAtMSkgewogICAgICAgICAgdGFnX2luZGV4ID0gdGFnX2NvbXBsZXRlLmluZGV4T2YoJyAnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGFnX2luZGV4ID0gdGFnX2NvbXBsZXRlLmluZGV4T2YoJz4nKTsKICAgICAgICB9CgogICAgICAgIHZhciB0YWdfY2hlY2sgPSB0YWdfY29tcGxldGUuc3Vic3RyaW5nKDEsIHRhZ19pbmRleCkudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgaWYgKHRhZ19jb21wbGV0ZS5jaGFyQXQodGFnX2NvbXBsZXRlLmxlbmd0aCAtIDIpID09PSAnLycgfHwgdGhpcy5VdGlscy5pbl9hcnJheSh0YWdfY2hlY2ssIHRoaXMuVXRpbHMuc2luZ2xlX3Rva2VuKSkgewogICAgICAgICAgdGhpcy50YWdfdHlwZSA9ICdTSU5HTEUnOwogICAgICAgIH0gZWxzZSBpZiAodGFnX2NoZWNrID09PSAnc2NyaXB0JykgewogICAgICAgICAgdGhpcy5yZWNvcmRfdGFnKHRhZ19jaGVjayk7CiAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NDUklQVCc7CiAgICAgICAgfSBlbHNlIGlmICh0YWdfY2hlY2sgPT09ICdzdHlsZScpIHsKICAgICAgICAgIHRoaXMucmVjb3JkX3RhZyh0YWdfY2hlY2spOwogICAgICAgICAgdGhpcy50YWdfdHlwZSA9ICdTVFlMRSc7CiAgICAgICAgfSBlbHNlIGlmICh0YWdfY2hlY2suY2hhckF0KDApID09PSAnIScpIHsKICAgICAgICAgIGlmICh0YWdfY2hlY2suaW5kZXhPZignW2lmJykgIT0gLTEpIHsKICAgICAgICAgICAgaWYgKHRhZ19jb21wbGV0ZS5pbmRleE9mKCchSUUnKSAhPSAtMSkgewogICAgICAgICAgICAgIHZhciBjb21tZW50ID0gdGhpcy5nZXRfdW5mb3JtYXR0ZWQoJy0tPicsIHRhZ19jb21wbGV0ZSk7CiAgICAgICAgICAgICAgY29udGVudC5wdXNoKGNvbW1lbnQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NUQVJUJzsKICAgICAgICAgIH0gZWxzZSBpZiAodGFnX2NoZWNrLmluZGV4T2YoJ1tlbmRpZicpICE9IC0xKSB7CiAgICAgICAgICAgIHRoaXMudGFnX3R5cGUgPSAnRU5EJzsKICAgICAgICAgICAgdGhpcy51bmluZGVudCgpOwogICAgICAgICAgfSBlbHNlIGlmICh0YWdfY2hlY2suaW5kZXhPZignW2NkYXRhWycpICE9IC0xKSB7CiAgICAgICAgICAgIHZhciBjb21tZW50ID0gdGhpcy5nZXRfdW5mb3JtYXR0ZWQoJ11dPicsIHRhZ19jb21wbGV0ZSk7CiAgICAgICAgICAgIGNvbnRlbnQucHVzaChjb21tZW50KTsKICAgICAgICAgICAgdGhpcy50YWdfdHlwZSA9ICdTSU5HTEUnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSB0aGlzLmdldF91bmZvcm1hdHRlZCgnLS0+JywgdGFnX2NvbXBsZXRlKTsKICAgICAgICAgICAgY29udGVudC5wdXNoKGNvbW1lbnQpOwogICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NJTkdMRSc7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0YWdfY2hlY2suY2hhckF0KDApID09PSAnLycpIHsKICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZV90YWcodGFnX2NoZWNrLnN1YnN0cmluZygxKSk7CiAgICAgICAgICAgIHRoaXMudGFnX3R5cGUgPSAnRU5EJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucmVjb3JkX3RhZyh0YWdfY2hlY2spOwogICAgICAgICAgICB0aGlzLnRhZ190eXBlID0gJ1NUQVJUJzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5VdGlscy5pbl9hcnJheSh0YWdfY2hlY2ssIHRoaXMuVXRpbHMuZXh0cmFfbGluZXJzKSkgewogICAgICAgICAgICB0aGlzLnByaW50X25ld2xpbmUodHJ1ZSwgdGhpcy5vdXRwdXQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvbnRlbnQuam9pbignJyk7CiAgICAgIH07CgogICAgICB0aGlzLmdldF91bmZvcm1hdHRlZCA9IGZ1bmN0aW9uIChkZWxpbWl0ZXIsIG9yaWdfdGFnKSB7CiAgICAgICAgaWYgKG9yaWdfdGFnICYmIG9yaWdfdGFnLmluZGV4T2YoZGVsaW1pdGVyKSAhPSAtMSkgewogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KCiAgICAgICAgdmFyIGNoYXIgPSAnJzsKICAgICAgICB2YXIgY29udGVudCA9ICcnOwogICAgICAgIHZhciBzcGFjZSA9IHRydWU7CgogICAgICAgIGRvIHsKICAgICAgICAgIGNoYXIgPSB0aGlzLmlucHV0LmNoYXJBdCh0aGlzLnBvcyk7CiAgICAgICAgICB0aGlzLnBvcysrOwoKICAgICAgICAgIGlmICh0aGlzLlV0aWxzLmluX2FycmF5KGNoYXIsIHRoaXMuVXRpbHMud2hpdGVzcGFjZSkpIHsKICAgICAgICAgICAgaWYgKCFzcGFjZSkgewogICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50LS07CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjaGFyID09PSAnXG4nIHx8IGNoYXIgPT09ICdccicpIHsKICAgICAgICAgICAgICBjb250ZW50ICs9ICdcbic7CgogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbmRlbnRfbGV2ZWw7IGkrKykgewogICAgICAgICAgICAgICAgY29udGVudCArPSB0aGlzLmluZGVudF9zdHJpbmc7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzcGFjZSA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50ID0gMDsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGNvbnRlbnQgKz0gY2hhcjsKICAgICAgICAgIHRoaXMubGluZV9jaGFyX2NvdW50Kys7CiAgICAgICAgICBzcGFjZSA9IHRydWU7CiAgICAgICAgfSB3aGlsZSAoY29udGVudC5pbmRleE9mKGRlbGltaXRlcikgPT0gLTEpOwoKICAgICAgICByZXR1cm4gY29udGVudDsKICAgICAgfTsKCiAgICAgIHRoaXMuZ2V0X3Rva2VuID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0b2tlbjsKCiAgICAgICAgaWYgKHRoaXMubGFzdF90b2tlbiA9PT0gJ1RLX1RBR19TQ1JJUFQnKSB7CiAgICAgICAgICB2YXIgdGVtcF90b2tlbiA9IHRoaXMuZ2V0X3NjcmlwdCgpOwoKICAgICAgICAgIGlmICh0eXBlb2YgdGVtcF90b2tlbiAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgcmV0dXJuIHRlbXBfdG9rZW47CiAgICAgICAgICB9IC8vdG9rZW4gPSBqc19iZWF1dGlmeSh0ZW1wX3Rva2VuLCB0aGlzLmluZGVudF9zaXplLCB0aGlzLmluZGVudF9jaGFyYWN0ZXIsIHRoaXMuaW5kZW50X2xldmVsKTsKICAgICAgICAgIC8vcmV0dXJuIFt0b2tlbiwgJ1RLX0NPTlRFTlQnXTsKCgogICAgICAgICAgcmV0dXJuIFt0ZW1wX3Rva2VuLCAnVEtfQ09OVEVOVCddOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuY3VycmVudF9tb2RlID09PSAnQ09OVEVOVCcpIHsKICAgICAgICAgIHRva2VuID0gdGhpcy5nZXRfY29udGVudCgpOwoKICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJldHVybiB0b2tlbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBbdG9rZW4sICdUS19DT05URU5UJ107CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5jdXJyZW50X21vZGUgPT09ICdUQUcnKSB7CiAgICAgICAgICB0b2tlbiA9IHRoaXMuZ2V0X3RhZygpOwoKICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIHJldHVybiB0b2tlbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciB0YWdfbmFtZV90eXBlID0gJ1RLX1RBR18nICsgdGhpcy50YWdfdHlwZTsKICAgICAgICAgICAgcmV0dXJuIFt0b2tlbiwgdGFnX25hbWVfdHlwZV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdGhpcy5wcmludGVyID0gZnVuY3Rpb24gKGpzX3NvdXJjZSwgaW5kZW50X2NoYXJhY3RlciwgaW5kZW50X3NpemUsIG1heF9jaGFyKSB7CiAgICAgICAgdGhpcy5pbnB1dCA9IGpzX3NvdXJjZSB8fCAnJzsKICAgICAgICB0aGlzLm91dHB1dCA9IFtdOwogICAgICAgIHRoaXMuaW5kZW50X2NoYXJhY3RlciA9IGluZGVudF9jaGFyYWN0ZXIgfHwgJyAnOwogICAgICAgIHRoaXMuaW5kZW50X3N0cmluZyA9ICcnOwogICAgICAgIHRoaXMuaW5kZW50X3NpemUgPSBpbmRlbnRfc2l6ZSB8fCAyOwogICAgICAgIHRoaXMuaW5kZW50X2xldmVsID0gMDsKICAgICAgICB0aGlzLm1heF9jaGFyID0gbWF4X2NoYXIgfHwgNzA7CiAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQgPSAwOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5kZW50X3NpemU7IGkrKykgewogICAgICAgICAgdGhpcy5pbmRlbnRfc3RyaW5nICs9IHRoaXMuaW5kZW50X2NoYXJhY3RlcjsKICAgICAgICB9CgogICAgICAgIHRoaXMucHJpbnRfbmV3bGluZSA9IGZ1bmN0aW9uIChpZ25vcmUsIGFycikgewogICAgICAgICAgdGhpcy5saW5lX2NoYXJfY291bnQgPSAwOwoKICAgICAgICAgIGlmICghYXJyIHx8ICFhcnIubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWlnbm9yZSkgewogICAgICAgICAgICB3aGlsZSAodGhpcy5VdGlscy5pbl9hcnJheShhcnJbYXJyLmxlbmd0aCAtIDFdLCB0aGlzLlV0aWxzLndoaXRlc3BhY2UpKSB7CiAgICAgICAgICAgICAgYXJyLnBvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYXJyLnB1c2goJ1xuJyk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmluZGVudF9sZXZlbDsgaSsrKSB7CiAgICAgICAgICAgIGFyci5wdXNoKHRoaXMuaW5kZW50X3N0cmluZyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5wcmludF90b2tlbiA9IGZ1bmN0aW9uICh0ZXh0KSB7CiAgICAgICAgICB0aGlzLm91dHB1dC5wdXNoKHRleHQpOwogICAgICAgIH07CgogICAgICAgIHRoaXMuaW5kZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy5pbmRlbnRfbGV2ZWwrKzsKICAgICAgICB9OwoKICAgICAgICB0aGlzLnVuaW5kZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHRoaXMuaW5kZW50X2xldmVsID4gMCkgewogICAgICAgICAgICB0aGlzLmluZGVudF9sZXZlbC0tOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH07CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBtdWx0aV9wYXJzZXIgPSBuZXcgUGFyc2VyKCk7CiAgICBtdWx0aV9wYXJzZXIucHJpbnRlcihodG1sX3NvdXJjZSwgaW5kZW50X2NoYXJhY3RlciwgaW5kZW50X3NpemUpOwoKICAgIHdoaWxlICh0cnVlKSB7CiAgICAgIHZhciB0ID0gbXVsdGlfcGFyc2VyLmdldF90b2tlbigpOwogICAgICBtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCA9IHRbMF07CiAgICAgIG11bHRpX3BhcnNlci50b2tlbl90eXBlID0gdFsxXTsKCiAgICAgIGlmIChtdWx0aV9wYXJzZXIudG9rZW5fdHlwZSA9PT0gJ1RLX0VPRicpIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgc3dpdGNoIChtdWx0aV9wYXJzZXIudG9rZW5fdHlwZSkgewogICAgICAgIGNhc2UgJ1RLX1RBR19TVEFSVCc6CiAgICAgICAgY2FzZSAnVEtfVEFHX1NDUklQVCc6CiAgICAgICAgY2FzZSAnVEtfVEFHX1NUWUxFJzoKICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF9uZXdsaW5lKGZhbHNlLCBtdWx0aV9wYXJzZXIub3V0cHV0KTsKICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF90b2tlbihtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCk7CiAgICAgICAgICBtdWx0aV9wYXJzZXIuaW5kZW50KCk7CiAgICAgICAgICBtdWx0aV9wYXJzZXIuY3VycmVudF9tb2RlID0gJ0NPTlRFTlQnOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ1RLX1RBR19FTkQnOgogICAgICAgICAgbXVsdGlfcGFyc2VyLnByaW50X25ld2xpbmUodHJ1ZSwgbXVsdGlfcGFyc2VyLm91dHB1dCk7CiAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfdG9rZW4obXVsdGlfcGFyc2VyLnRva2VuX3RleHQpOwogICAgICAgICAgbXVsdGlfcGFyc2VyLmN1cnJlbnRfbW9kZSA9ICdDT05URU5UJzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdUS19UQUdfU0lOR0xFJzoKICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF9uZXdsaW5lKGZhbHNlLCBtdWx0aV9wYXJzZXIub3V0cHV0KTsKICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF90b2tlbihtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCk7CiAgICAgICAgICBtdWx0aV9wYXJzZXIuY3VycmVudF9tb2RlID0gJ0NPTlRFTlQnOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ1RLX0NPTlRFTlQnOgogICAgICAgICAgaWYgKG11bHRpX3BhcnNlci50b2tlbl90ZXh0ICE9PSAnJykgewogICAgICAgICAgICBtdWx0aV9wYXJzZXIucHJpbnRfbmV3bGluZShmYWxzZSwgbXVsdGlfcGFyc2VyLm91dHB1dCk7CiAgICAgICAgICAgIG11bHRpX3BhcnNlci5wcmludF90b2tlbihtdWx0aV9wYXJzZXIudG9rZW5fdGV4dCk7CiAgICAgICAgICB9CgogICAgICAgICAgbXVsdGlfcGFyc2VyLmN1cnJlbnRfbW9kZSA9ICdUQUcnOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIG11bHRpX3BhcnNlci5sYXN0X3Rva2VuID0gbXVsdGlfcGFyc2VyLnRva2VuX3R5cGU7CiAgICAgIG11bHRpX3BhcnNlci5sYXN0X3RleHQgPSBtdWx0aV9wYXJzZXIudG9rZW5fdGV4dDsKICAgIH0KCiAgICByZXR1cm4gbXVsdGlfcGFyc2VyLm91dHB1dC5qb2luKCcnKTsKICB9CgogIHJldHVybiBmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIGRhdGFIb2xkZXIgPSBbJ19fZGF0YUhvbGRlcl8nLCBbTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKV0uam9pbignXycpLnJlcGxhY2UoL1teMC05XS9nLCAnXycpLCAnXyddLmpvaW4oJ18nKTsKICAgIHZhciBkYXRhSG9sZGVycyA9IHt9OwogICAgdmFyIGluZGV4ID0gMDsKICAgIGRhdGEgPSBkYXRhLnJlcGxhY2UoLyhcIikoZGF0YTpbXlwiXSopKFwiKS9nLCBmdW5jdGlvbiAoJDAsICQxLCAkMiwgJDMpIHsKICAgICAgdmFyIG5hbWUgPSBkYXRhSG9sZGVyICsgaW5kZXgrKzsKICAgICAgZGF0YUhvbGRlcnNbbmFtZV0gPSAkMjsKICAgICAgcmV0dXJuICQxICsgbmFtZSArICQzOwogICAgfSk7CiAgICBkYXRhID0gc3R5bGVfaHRtbChkYXRhLCAyLCAnICcsIDB4MTAwMDAwMDApOwogICAgZGF0YSA9IGRhdGEucmVwbGFjZShuZXcgUmVnRXhwKGRhdGFIb2xkZXIgKyAnWzAtOV0rJywgJ2cnKSwgZnVuY3Rpb24gKCQwKSB7CiAgICAgIHJldHVybiBkYXRhSG9sZGVyc1skMF07CiAgICB9KTsKICAgIHJldHVybiBkYXRhOwogIH07Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IGZvcm1hdDs="},{"version":3,"sources":["F:/workspace/jf_front_end/src/components/d2-highlight/libs/htmlFormat.js"],"names":["format","style_html","html_source","indent_size","indent_character","max_char","Parser","multi_parser","pos","token","current_mode","tags","parent","parentcount","parent1","tag_type","token_text","last_token","last_text","token_type","Utils","whitespace","split","single_token","extra_liners","in_array","what","arr","i","length","get_content","char","content","space","input","charAt","join","line_char_count","push","indent_level","indent_string","get_script","reg_match","RegExp","lastIndex","reg_array","exec","end_script","index","record_tag","tag","retrieve_tag","temp_parent","get_tag","get_unformatted","print_newline","tag_complete","tag_index","indexOf","tag_check","substring","toLowerCase","comment","unindent","output","delimiter","orig_tag","get_token","temp_token","tag_name_type","printer","js_source","ignore","pop","print_token","text","indent","t","data","dataHolder","Math","random","replace","dataHolders","$0","$1","$2","$3","name"],"mappings":"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","sourcesContent":["/* eslint-disable */\r\n\r\n// 功能\r\n// 将HTML字符串格式化\r\n\r\nconst format = (function() {\r\n  function style_html(html_source, indent_size, indent_character, max_char) {\r\n    var Parser, multi_parser;\r\n    function Parser() {\r\n      this.pos = 0;\r\n      this.token = '';\r\n      this.current_mode = 'CONTENT';\r\n      this.tags = {\r\n        parent: 'parent1',\r\n        parentcount: 1,\r\n        parent1: ''\r\n      };\r\n      this.tag_type = '';\r\n      this.token_text = this.last_token = this.last_text = this.token_type = '';\r\n      this.Utils = {\r\n        whitespace: \"\\n\\r\\t \".split(''),\r\n        single_token: 'br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed'.split(','),\r\n        extra_liners: 'head,body,/html'.split(','),\r\n        in_array: function(what, arr) {\r\n          for (var i = 0; i < arr.length; i++) {\r\n            if (what === arr[i]) {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        }\r\n      }\r\n      this.get_content = function() {\r\n        var char = '';\r\n        var content = [];\r\n        var space = false;\r\n        while (this.input.charAt(this.pos) !== '<') {\r\n          if (this.pos >= this.input.length) {\r\n            return content.length ? content.join('') : ['', 'TK_EOF'];\r\n          }\r\n          char = this.input.charAt(this.pos);\r\n          this.pos++;\r\n          this.line_char_count++;\r\n          if (this.Utils.in_array(char, this.Utils.whitespace)) {\r\n            if (content.length) {\r\n              space = true;\r\n            }\r\n            this.line_char_count--;\r\n            continue;\r\n          } else if (space) {\r\n            if (this.line_char_count >= this.max_char) {\r\n              content.push('\\n');\r\n              for (var i = 0; i < this.indent_level; i++) {\r\n                content.push(this.indent_string);\r\n              }\r\n              this.line_char_count = 0;\r\n            } else {\r\n              content.push(' ');\r\n              this.line_char_count++;\r\n            }\r\n            space = false;\r\n          }\r\n          content.push(char);\r\n        }\r\n        return content.length ? content.join('') : '';\r\n      }\r\n      this.get_script = function() {\r\n        var char = '';\r\n        var content = [];\r\n        var reg_match = new RegExp('\\<\\/script' + '\\>', 'igm');\r\n        reg_match.lastIndex = this.pos;\r\n        var reg_array = reg_match.exec(this.input);\r\n        var end_script = reg_array ? reg_array.index: this.input.length;\r\n        while (this.pos < end_script) {\r\n          if (this.pos >= this.input.length) {\r\n            return content.length ? content.join('') : ['', 'TK_EOF'];\r\n          }\r\n          char = this.input.charAt(this.pos);\r\n          this.pos++;\r\n          content.push(char);\r\n        }\r\n        return content.length ? content.join('') : '';\r\n      }\r\n      this.record_tag = function(tag) {\r\n        if (this.tags[tag + 'count']) {\r\n          this.tags[tag + 'count']++;\r\n          this.tags[tag + this.tags[tag + 'count']] = this.indent_level;\r\n        } else {\r\n          this.tags[tag + 'count'] = 1;\r\n          this.tags[tag + this.tags[tag + 'count']] = this.indent_level;\r\n        }\r\n        this.tags[tag + this.tags[tag + 'count'] + 'parent'] = this.tags.parent;\r\n        this.tags.parent = tag + this.tags[tag + 'count'];\r\n      }\r\n      this.retrieve_tag = function(tag) {\r\n        if (this.tags[tag + 'count']) {\r\n          var temp_parent = this.tags.parent;\r\n          while (temp_parent) {\r\n            if (tag + this.tags[tag + 'count'] === temp_parent) {\r\n              break;\r\n            }\r\n            temp_parent = this.tags[temp_parent + 'parent'];\r\n          }\r\n          if (temp_parent) {\r\n            this.indent_level = this.tags[tag + this.tags[tag + 'count']];\r\n            this.tags.parent = this.tags[temp_parent + 'parent'];\r\n          }\r\n          delete this.tags[tag + this.tags[tag + 'count'] + 'parent'];\r\n          delete this.tags[tag + this.tags[tag + 'count']];\r\n          if (this.tags[tag + 'count'] == 1) {\r\n            delete this.tags[tag + 'count'];\r\n          } else {\r\n            this.tags[tag + 'count']--;\r\n          }\r\n        }\r\n      }\r\n      this.get_tag = function() {\r\n        var char = '';\r\n        var content = [];\r\n        var space = false;\r\n        do {\r\n          if (this.pos >= this.input.length) {\r\n            return content.length ? content.join('') : ['', 'TK_EOF'];\r\n          }\r\n          char = this.input.charAt(this.pos);\r\n          this.pos++;\r\n          this.line_char_count++;\r\n          if (this.Utils.in_array(char, this.Utils.whitespace)) {\r\n            space = true;\r\n            this.line_char_count--;\r\n            continue;\r\n          }\r\n          if (char === \"'\" || char === '\"') {\r\n            if (!content[1] || content[1] !== '!') {\r\n              char += this.get_unformatted(char);\r\n              space = true;\r\n            }\r\n          }\r\n          if (char === '=') {\r\n            space = false;\r\n          }\r\n          if (content.length && content[content.length - 1] !== '=' && char !== '>' && space) {\r\n            if (this.line_char_count >= this.max_char) {\r\n              this.print_newline(false, content);\r\n              this.line_char_count = 0;\r\n            } else {\r\n              content.push(' ');\r\n              this.line_char_count++;\r\n            }\r\n            space = false;\r\n          }\r\n          content.push(char);\r\n        } while ( char !== '>');\r\n        var tag_complete = content.join('');\r\n        var tag_index;\r\n        if (tag_complete.indexOf(' ') != -1) {\r\n          tag_index = tag_complete.indexOf(' ');\r\n        } else {\r\n          tag_index = tag_complete.indexOf('>');\r\n        }\r\n        var tag_check = tag_complete.substring(1, tag_index).toLowerCase();\r\n        if (tag_complete.charAt(tag_complete.length - 2) === '/' || this.Utils.in_array(tag_check, this.Utils.single_token)) {\r\n          this.tag_type = 'SINGLE';\r\n        } else if (tag_check === 'script') {\r\n          this.record_tag(tag_check);\r\n          this.tag_type = 'SCRIPT';\r\n        } else if (tag_check === 'style') {\r\n          this.record_tag(tag_check);\r\n          this.tag_type = 'STYLE';\r\n        } else if (tag_check.charAt(0) === '!') {\r\n          if (tag_check.indexOf('[if') != -1) {\r\n            if (tag_complete.indexOf('!IE') != -1) {\r\n              var comment = this.get_unformatted('-->', tag_complete);\r\n              content.push(comment);\r\n            }\r\n            this.tag_type = 'START';\r\n          } else if (tag_check.indexOf('[endif') != -1) {\r\n            this.tag_type = 'END';\r\n            this.unindent();\r\n          } else if (tag_check.indexOf('[cdata[') != -1) {\r\n            var comment = this.get_unformatted(']]>', tag_complete);\r\n            content.push(comment);\r\n            this.tag_type = 'SINGLE';\r\n          } else {\r\n            var comment = this.get_unformatted('-->', tag_complete);\r\n            content.push(comment);\r\n            this.tag_type = 'SINGLE';\r\n          }\r\n        } else {\r\n          if (tag_check.charAt(0) === '/') {\r\n            this.retrieve_tag(tag_check.substring(1));\r\n            this.tag_type = 'END';\r\n          } else {\r\n            this.record_tag(tag_check);\r\n            this.tag_type = 'START';\r\n          }\r\n          if (this.Utils.in_array(tag_check, this.Utils.extra_liners)) {\r\n            this.print_newline(true, this.output);\r\n          }\r\n        }\r\n        return content.join('');\r\n      }\r\n      this.get_unformatted = function(delimiter, orig_tag) {\r\n        if (orig_tag && orig_tag.indexOf(delimiter) != -1) {\r\n          return '';\r\n        }\r\n        var char = '';\r\n        var content = '';\r\n        var space = true;\r\n        do {\r\n          char = this.input.charAt(this.pos);\r\n          this.pos++\r\n          if (this.Utils.in_array(char, this.Utils.whitespace)) {\r\n            if (!space) {\r\n              this.line_char_count--;\r\n              continue;\r\n            }\r\n            if (char === '\\n' || char === '\\r') {\r\n              content += '\\n';\r\n              for (var i = 0; i < this.indent_level; i++) {\r\n                content += this.indent_string;\r\n              }\r\n              space = false;\r\n              this.line_char_count = 0;\r\n              continue;\r\n            }\r\n          }\r\n          content += char;\r\n          this.line_char_count++;\r\n          space = true;\r\n\r\n        } while ( content . indexOf ( delimiter ) == -1);\r\n        return content;\r\n      }\r\n      this.get_token = function() {\r\n        var token;\r\n        if (this.last_token === 'TK_TAG_SCRIPT') {\r\n          var temp_token = this.get_script();\r\n          if (typeof temp_token !== 'string') {\r\n            return temp_token;\r\n          }\r\n          //token = js_beautify(temp_token, this.indent_size, this.indent_character, this.indent_level);\r\n          //return [token, 'TK_CONTENT'];\r\n          return [temp_token, 'TK_CONTENT'];\r\n        }\r\n        if (this.current_mode === 'CONTENT') {\r\n          token = this.get_content();\r\n          if (typeof token !== 'string') {\r\n            return token;\r\n          } else {\r\n            return [token, 'TK_CONTENT'];\r\n          }\r\n        }\r\n        if (this.current_mode === 'TAG') {\r\n          token = this.get_tag();\r\n          if (typeof token !== 'string') {\r\n            return token;\r\n          } else {\r\n            var tag_name_type = 'TK_TAG_' + this.tag_type;\r\n            return [token, tag_name_type];\r\n          }\r\n        }\r\n      }\r\n      this.printer = function(js_source, indent_character, indent_size, max_char) {\r\n        this.input = js_source || '';\r\n        this.output = [];\r\n        this.indent_character = indent_character || ' ';\r\n        this.indent_string = '';\r\n        this.indent_size = indent_size || 2;\r\n        this.indent_level = 0;\r\n        this.max_char = max_char || 70;\r\n        this.line_char_count = 0;\r\n        for (var i = 0; i < this.indent_size; i++) {\r\n          this.indent_string += this.indent_character;\r\n        }\r\n        this.print_newline = function(ignore, arr) {\r\n          this.line_char_count = 0;\r\n          if (!arr || !arr.length) {\r\n            return;\r\n          }\r\n          if (!ignore) {\r\n            while (this.Utils.in_array(arr[arr.length - 1], this.Utils.whitespace)) {\r\n              arr.pop();\r\n            }\r\n          }\r\n          arr.push('\\n');\r\n          for (var i = 0; i < this.indent_level; i++) {\r\n            arr.push(this.indent_string);\r\n          }\r\n        }\r\n        this.print_token = function(text) {\r\n          this.output.push(text);\r\n        }\r\n        this.indent = function() {\r\n          this.indent_level++;\r\n        }\r\n        this.unindent = function() {\r\n          if (this.indent_level > 0) {\r\n            this.indent_level--;\r\n          }\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n    multi_parser = new Parser();\r\n    multi_parser.printer(html_source, indent_character, indent_size);\r\n    while (true) {\r\n      var t = multi_parser.get_token();\r\n      multi_parser.token_text = t[0];\r\n      multi_parser.token_type = t[1];\r\n      if (multi_parser.token_type === 'TK_EOF') {\r\n        break;\r\n      }\r\n      switch (multi_parser.token_type) {\r\n      case 'TK_TAG_START':\r\n      case 'TK_TAG_SCRIPT':\r\n      case 'TK_TAG_STYLE':\r\n        multi_parser.print_newline(false, multi_parser.output);\r\n        multi_parser.print_token(multi_parser.token_text);\r\n        multi_parser.indent();\r\n        multi_parser.current_mode = 'CONTENT';\r\n        break;\r\n      case 'TK_TAG_END':\r\n        multi_parser.print_newline(true, multi_parser.output);\r\n        multi_parser.print_token(multi_parser.token_text);\r\n        multi_parser.current_mode = 'CONTENT';\r\n        break;\r\n      case 'TK_TAG_SINGLE':\r\n        multi_parser.print_newline(false, multi_parser.output);\r\n        multi_parser.print_token(multi_parser.token_text);\r\n        multi_parser.current_mode = 'CONTENT';\r\n        break;\r\n      case 'TK_CONTENT':\r\n        if (multi_parser.token_text !== '') {\r\n          multi_parser.print_newline(false, multi_parser.output);\r\n          multi_parser.print_token(multi_parser.token_text);\r\n        }\r\n        multi_parser.current_mode = 'TAG';\r\n        break;\r\n      }\r\n      multi_parser.last_token = multi_parser.token_type;\r\n      multi_parser.last_text = multi_parser.token_text;\r\n    }\r\n    return multi_parser.output.join('');\r\n  }\r\n  return function(data) {\r\n    var dataHolder = ['__dataHolder_', [Math.random(), Math.random(), Math.random(), Math.random()].join('_').replace(/[^0-9]/g, '_'), '_'].join('_');\r\n    var dataHolders = {};\r\n    var index = 0;\r\n    data = data.replace(/(\\\")(data:[^\\\"]*)(\\\")/g,\r\n    function($0, $1, $2, $3) {\r\n      var name = dataHolder + index++;\r\n      dataHolders[name] = $2;\r\n      return $1 + name + $3;\r\n    })\r\n    data = style_html(data, 2, ' ', 0x10000000);\r\n    data = data.replace(new RegExp(dataHolder + '[0-9]+', 'g'),\r\n    function($0) {\r\n      return dataHolders[$0];\r\n    });\r\n    return data;\r\n  }\r\n})();\r\n\r\nexport default format\r\n"]}]}