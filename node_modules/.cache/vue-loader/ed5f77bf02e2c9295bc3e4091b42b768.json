{"remainingRequest":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\jf_front_end\\src\\views\\demo\\playground\\add-routes\\routes.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\workspace\\jf_front_end\\src\\views\\demo\\playground\\add-routes\\routes.vue","mtime":1590460801191},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gnDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCcNCmltcG9ydCB7IGZyYW1lSW5Sb3V0ZXMgfSBmcm9tICdAL3JvdXRlci9yb3V0ZXMnDQppbXBvcnQgbGF5b3V0SGVhZGVyQXNpZGUgZnJvbSAnQC9sYXlvdXQvaGVhZGVyLWFzaWRlJw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGl0bGU6ICcnLA0KICAgICAgc2V0dGluZzogWw0KICAgICAgICB7IHRpdGxlOiAn6L+95Yqg6aG16Z2iIDEnLCBuYW1lOiAnYWRkLXJvdXRlcy0xJywgcGF0aDogJ2FkZC1yb3V0ZXMvMScsIGNvbXBvbmVudDogJzEnIH0sDQogICAgICAgIHsgdGl0bGU6ICfov73liqDpobXpnaIgMicsIG5hbWU6ICdhZGQtcm91dGVzLTInLCBwYXRoOiAnYWRkLXJvdXRlcy8yJywgY29tcG9uZW50OiAnMicgfSwNCiAgICAgICAgeyB0aXRsZTogJ+i/veWKoOmhtemdoiAzJywgbmFtZTogJ2FkZC1yb3V0ZXMtMycsIHBhdGg6ICdhZGQtcm91dGVzLzMnLCBjb21wb25lbnQ6ICczJyB9DQogICAgICBdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKCdkMmFkbWluL21lbnUnLCBbDQogICAgICAnaGVhZGVyJw0KICAgIF0pLA0KICAgIGRhdGFWaWV3ICgpIHsNCiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmcsIG51bGwsIDIpDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKHsNCiAgICAgIHBhZ2VJbml0OiAnZDJhZG1pbi9wYWdlL2luaXQnLA0KICAgICAgaGVhZGVyU2V0OiAnZDJhZG1pbi9tZW51L2hlYWRlclNldCcNCiAgICB9KSwNCiAgICBvbkNsaWNrICh7IHRpdGxlLCBuYW1lLCBwYXRoLCBjb21wb25lbnQgfSkgew0KICAgICAgLy8gdnVlIHJvdXRlciDnmoTorr7orqHmmoLml7bkuI3og73mlK/mjIHlnKjot6/nlLHnpLrkvovkuIrorr/pl67liqjmgIHmt7vliqDnmoTot6/nlLENCiAgICAgIC8vIOebruWJjeWPr+ihjOeahOino+WGs+aWueazleaYr+iHquihjOe7tOaKpOS4gOS4quWtmOWCqOi3r+eUseaVsOaNrueahOS9jee9rg0KICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzEyMzQNCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtcm91dGVyL2lzc3Vlcy8xODU5DQogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLXJvdXRlci9pc3N1ZXMvMTk1NQ0KICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1yb3V0ZXIvaXNzdWVzLzI0NTQNCiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtcm91dGVyL2lzc3Vlcy8yMjgwDQogICAgICAvLyDmiYDku6XmmoLml7blhYjkuI3lgZrlr7not6/nlLHlt7Lnu4/lrZjlnKjnmoTliKTmlq0NCiAgICAgIGNvbnN0IHJvdXRlID0gWw0KICAgICAgICB7DQogICAgICAgICAgcGF0aDogJy9kZW1vL3BsYXlncm91bmQnLA0KICAgICAgICAgIGNvbXBvbmVudDogbGF5b3V0SGVhZGVyQXNpZGUsDQogICAgICAgICAgY2hpbGRyZW46IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcGF0aCwNCiAgICAgICAgICAgICAgbmFtZSwNCiAgICAgICAgICAgICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ0Avdmlld3MvZGVtby9wbGF5Z3JvdW5kL2FkZC1yb3V0ZXMvYWx0ZXJuYXRlcy8nICsgY29tcG9uZW50ICsgJy52dWUnKSwNCiAgICAgICAgICAgICAgbWV0YTogew0KICAgICAgICAgICAgICAgIHRpdGxlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdDQogICAgICAgIH0NCiAgICAgIF0NCiAgICAgIHRoaXMuJHJvdXRlci5hZGRSb3V0ZXMocm91dGUpDQogICAgICAvLyDmm7TmlrDmoIfnrb7pobXmsaANCiAgICAgIHRoaXMucGFnZUluaXQoWw0KICAgICAgICAuLi5mcmFtZUluUm91dGVzLA0KICAgICAgICAuLi5yb3V0ZQ0KICAgICAgXSkNCiAgICAgIC8vIOa8lOekuuabtOaWsOiPnOWNlQ0KICAgICAgY29uc3QgbWVudUdyb3VwID0gew0KICAgICAgICB0aXRsZTogJ+S4tOaXtuiPnOWNlScsDQogICAgICAgIGljb246ICdwbHVzLXNxdWFyZScsDQogICAgICAgIGNoaWxkcmVuOiBbXQ0KICAgICAgfQ0KICAgICAgY29uc3QgbWVudSA9IHsNCiAgICAgICAgcGF0aDogYC9kZW1vL3BsYXlncm91bmQvJHtwYXRofWAsDQogICAgICAgIHRpdGxlLA0KICAgICAgICBpY29uOiAnZmlsZS1vJw0KICAgICAgfQ0KICAgICAgY29uc3QgaGVhZGVyID0gY2xvbmVEZWVwKHRoaXMuaGVhZGVyKQ0KICAgICAgY29uc3QgbWVudUdyb3VwSW5kZXggPSBoZWFkZXIuZmluZEluZGV4KGUgPT4gZS50aXRsZSA9PT0gbWVudUdyb3VwLnRpdGxlKQ0KICAgICAgLy8g5aaC5p6c6aG25qCP6I+c5Y2V5bey57uP5pyJ6L+Z5Liq57uE77yM5bCx5Zyo57uE6YeM5re75Yqg6aG555uu77yM5Y+N5LmL5paw5bu65LiA5Liq6I+c5Y2V57uEDQogICAgICBpZiAobWVudUdyb3VwSW5kZXggPj0gMCkgew0KICAgICAgICBoZWFkZXJbbWVudUdyb3VwSW5kZXhdLmNoaWxkcmVuLnB1c2gobWVudSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1lbnVHcm91cC5jaGlsZHJlbi5wdXNoKG1lbnUpDQogICAgICAgIGhlYWRlci5wdXNoKG1lbnVHcm91cCkNCiAgICAgIH0NCiAgICAgIHRoaXMuaGVhZGVyU2V0KGhlYWRlcikNCiAgICAgIC8vIOi3s+i9rA0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["routes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"routes.vue","sourceRoot":"src/views/demo/playground/add-routes","sourcesContent":["<template>\r\n  <d2-container>\r\n    <el-alert\r\n      title=\"由于演示功能特殊，请注意在需要时刷新您的浏览器（以重置路由设置）查看效果\"\r\n      type=\"warning\"\r\n      show-icon/>\r\n    <d2-highlight :code=\"dataView\"/>\r\n    <el-form label-position=\"top\">\r\n      <el-form-item label=\"创建路由（你可以假设上面是接口数据）\">\r\n        <el-button-group>\r\n          <el-button\r\n            v-for=\"item in setting\"\r\n            :key=\"item.component\"\r\n            @click=\"onClick(item)\">\r\n            {{item.title}}\r\n          </el-button>\r\n        </el-button-group>\r\n      </el-form-item>\r\n    </el-form>\r\n  </d2-container>\r\n</template>\r\n\r\n<script>\r\nimport { cloneDeep } from 'lodash'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport { frameInRoutes } from '@/router/routes'\r\nimport layoutHeaderAside from '@/layout/header-aside'\r\nexport default {\r\n  data () {\r\n    return {\r\n      title: '',\r\n      setting: [\r\n        { title: '追加页面 1', name: 'add-routes-1', path: 'add-routes/1', component: '1' },\r\n        { title: '追加页面 2', name: 'add-routes-2', path: 'add-routes/2', component: '2' },\r\n        { title: '追加页面 3', name: 'add-routes-3', path: 'add-routes/3', component: '3' }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('d2admin/menu', [\r\n      'header'\r\n    ]),\r\n    dataView () {\r\n      return JSON.stringify(this.setting, null, 2)\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      pageInit: 'd2admin/page/init',\r\n      headerSet: 'd2admin/menu/headerSet'\r\n    }),\r\n    onClick ({ title, name, path, component }) {\r\n      // vue router 的设计暂时不能支持在路由示例上访问动态添加的路由\r\n      // 目前可行的解决方法是自行维护一个存储路由数据的位置\r\n      // https://github.com/vuejs/vue-router/issues/1234\r\n      // https://github.com/vuejs/vue-router/issues/1859\r\n      // https://github.com/vuejs/vue-router/issues/1955\r\n      // https://github.com/vuejs/vue-router/issues/2454\r\n      // https://github.com/vuejs/vue-router/issues/2280\r\n      // 所以暂时先不做对路由已经存在的判断\r\n      const route = [\r\n        {\r\n          path: '/demo/playground',\r\n          component: layoutHeaderAside,\r\n          children: [\r\n            {\r\n              path,\r\n              name,\r\n              component: () => import('@/views/demo/playground/add-routes/alternates/' + component + '.vue'),\r\n              meta: {\r\n                title\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n      this.$router.addRoutes(route)\r\n      // 更新标签页池\r\n      this.pageInit([\r\n        ...frameInRoutes,\r\n        ...route\r\n      ])\r\n      // 演示更新菜单\r\n      const menuGroup = {\r\n        title: '临时菜单',\r\n        icon: 'plus-square',\r\n        children: []\r\n      }\r\n      const menu = {\r\n        path: `/demo/playground/${path}`,\r\n        title,\r\n        icon: 'file-o'\r\n      }\r\n      const header = cloneDeep(this.header)\r\n      const menuGroupIndex = header.findIndex(e => e.title === menuGroup.title)\r\n      // 如果顶栏菜单已经有这个组，就在组里添加项目，反之新建一个菜单组\r\n      if (menuGroupIndex >= 0) {\r\n        header[menuGroupIndex].children.push(menu)\r\n      } else {\r\n        menuGroup.children.push(menu)\r\n        header.push(menuGroup)\r\n      }\r\n      this.headerSet(header)\r\n      // 跳转\r\n      this.$router.push({ name })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}