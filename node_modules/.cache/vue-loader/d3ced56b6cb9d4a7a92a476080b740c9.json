{"remainingRequest":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\jf_front_end\\src\\components\\d2-quill\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\workspace\\jf_front_end\\src\\components\\d2-quill\\index.vue","mtime":1590460801091},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQppbXBvcnQgUXVpbGwgZnJvbSAncXVpbGwnDQppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MnDQppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuc25vdy5jc3MnDQppbXBvcnQgJ3F1aWxsL2Rpc3QvcXVpbGwuYnViYmxlLmNzcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2QyLXF1aWxsJywNCiAgcHJvcHM6IHsNCiAgICB2YWx1ZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9DQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBRdWlsbDogdW5kZWZpbmVkLA0KICAgICAgY3VycmVudFZhbHVlOiAnJywNCiAgICAgIG9wdGlvbnM6IHsNCiAgICAgICAgdGhlbWU6ICdzbm93JywNCiAgICAgICAgYm91bmRzOiBkb2N1bWVudC5ib2R5LA0KICAgICAgICBkZWJ1ZzogJ3dhcm4nLA0KICAgICAgICBtb2R1bGVzOiB7DQogICAgICAgICAgdG9vbGJhcjogWw0KICAgICAgICAgICAgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtlJ10sDQogICAgICAgICAgICBbJ2Jsb2NrcXVvdGUnLCAnY29kZS1ibG9jayddLA0KICAgICAgICAgICAgW3sgbGlzdDogJ29yZGVyZWQnIH0sIHsgbGlzdDogJ2J1bGxldCcgfV0sDQogICAgICAgICAgICAvLyBbeyAnc2NyaXB0JzogJ3N1YicgfSwgeyAnc2NyaXB0JzogJ3N1cGVyJyB9XSwNCiAgICAgICAgICAgIC8vIFt7ICdpbmRlbnQnOiAnLTEnIH0sIHsgJ2luZGVudCc6ICcrMScgfV0sDQogICAgICAgICAgICAvLyBbeyAnZGlyZWN0aW9uJzogJ3J0bCcgfV0sDQogICAgICAgICAgICBbeyBzaXplOiBbJ3NtYWxsJywgZmFsc2UsICdsYXJnZScsICdodWdlJ10gfV0sDQogICAgICAgICAgICBbeyBoZWFkZXI6IFsxLCAyLCAzLCA0LCA1LCA2LCBmYWxzZV0gfV0sDQogICAgICAgICAgICBbeyBjb2xvcjogW10gfSwgeyBiYWNrZ3JvdW5kOiBbXSB9XSwNCiAgICAgICAgICAgIC8vIFt7ICdmb250JzogW10gfV0sDQogICAgICAgICAgICBbeyBhbGlnbjogW10gfV0sDQogICAgICAgICAgICBbJ2NsZWFuJ10sDQogICAgICAgICAgICBbJ2xpbmsnLCAnaW1hZ2UnXQ0KICAgICAgICAgIF0NCiAgICAgICAgfSwNCiAgICAgICAgcGxhY2Vob2xkZXI6ICfkuablhpnkvaDnmoTlhoXlrrknLA0KICAgICAgICByZWFkT25seTogZmFsc2UNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgdmFsdWU6IHsNCiAgICAgIGhhbmRsZXIgKHZhbCkgew0KICAgICAgICAvLyDnoa7orqTmmK/mlrDnmoTlgLwNCiAgICAgICAgaWYgKHZhbCAhPT0gdGhpcy5jdXJyZW50VmFsdWUpIHsNCiAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHZhbA0KICAgICAgICAgIC8vIOWwneivleabtOaWsA0KICAgICAgICAgIGlmICh0aGlzLlF1aWxsKSB7DQogICAgICAgICAgICB0aGlzLlF1aWxsLnBhc3RlSFRNTCh0aGlzLnZhbHVlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQogICAgdGhpcy5pbml0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXQgKCkgew0KICAgICAgY29uc3QgZWRpdG9yID0gdGhpcy4kcmVmcy5lZGl0b3INCiAgICAgIC8vIOWIneWni+WMlue8lui+keWZqA0KICAgICAgdGhpcy5RdWlsbCA9IG5ldyBRdWlsbChlZGl0b3IsIHRoaXMub3B0aW9ucykNCiAgICAgIC8vIOm7mOiupOWAvA0KICAgICAgdGhpcy5RdWlsbC5wYXN0ZUhUTUwodGhpcy5jdXJyZW50VmFsdWUpDQogICAgICAvLyDnu5Hlrprkuovku7YNCiAgICAgIHRoaXMuUXVpbGwub24oJ3RleHQtY2hhbmdlJywgKGRlbHRhLCBvbGREZWx0YSwgc291cmNlKSA9PiB7DQogICAgICAgIGNvbnN0IGh0bWwgPSB0aGlzLiRyZWZzLmVkaXRvci5jaGlsZHJlblswXS5pbm5lckhUTUwNCiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuUXVpbGwuZ2V0VGV4dCgpDQogICAgICAgIGNvbnN0IHF1aWxsID0gdGhpcy5RdWlsbA0KICAgICAgICAvLyDmm7TmlrDlhoXpg6jnmoTlgLwNCiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBodG1sDQogICAgICAgIC8vIOWPkeWHuuS6i+S7tiB2LW1vZGVsDQogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgaHRtbCkNCiAgICAgICAgLy8g5Y+R5Ye65LqL5Lu2DQogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHsgaHRtbCwgdGV4dCwgcXVpbGwgfSkNCiAgICAgIH0pDQogICAgICAvLyDlsIbkuIDkupsgcXVpbGwg6Ieq5bim55qE5LqL5Lu25Lyg6YCS5Ye65Y67DQogICAgICB0aGlzLlF1aWxsLm9uKCd0ZXh0LWNoYW5nZScsIChkZWx0YSwgb2xkRGVsdGEsIHNvdXJjZSkgPT4gew0KICAgICAgICB0aGlzLiRlbWl0KCd0ZXh0LWNoYW5nZScsIGRlbHRhLCBvbGREZWx0YSwgc291cmNlKQ0KICAgICAgfSkNCiAgICAgIHRoaXMuUXVpbGwub24oJ3NlbGVjdGlvbi1jaGFuZ2UnLCAocmFuZ2UsIG9sZFJhbmdlLCBzb3VyY2UpID0+IHsNCiAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0aW9uLWNoYW5nZScsIHJhbmdlLCBvbGRSYW5nZSwgc291cmNlKQ0KICAgICAgfSkNCiAgICAgIHRoaXMuUXVpbGwub24oJ2VkaXRvci1jaGFuZ2UnLCAoZXZlbnROYW1lLCAuLi5hcmdzKSA9PiB7DQogICAgICAgIHRoaXMuJGVtaXQoJ2VkaXRvci1jaGFuZ2UnLCBldmVudE5hbWUsIC4uLmFyZ3MpDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/d2-quill","sourcesContent":["<template>\r\n  <div ref=\"editor\"></div>\r\n</template>\r\n\r\n<script>\r\nimport Quill from 'quill'\r\nimport 'quill/dist/quill.core.css'\r\nimport 'quill/dist/quill.snow.css'\r\nimport 'quill/dist/quill.bubble.css'\r\nexport default {\r\n  name: 'd2-quill',\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      Quill: undefined,\r\n      currentValue: '',\r\n      options: {\r\n        theme: 'snow',\r\n        bounds: document.body,\r\n        debug: 'warn',\r\n        modules: {\r\n          toolbar: [\r\n            ['bold', 'italic', 'underline', 'strike'],\r\n            ['blockquote', 'code-block'],\r\n            [{ list: 'ordered' }, { list: 'bullet' }],\r\n            // [{ 'script': 'sub' }, { 'script': 'super' }],\r\n            // [{ 'indent': '-1' }, { 'indent': '+1' }],\r\n            // [{ 'direction': 'rtl' }],\r\n            [{ size: ['small', false, 'large', 'huge'] }],\r\n            [{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n            [{ color: [] }, { background: [] }],\r\n            // [{ 'font': [] }],\r\n            [{ align: [] }],\r\n            ['clean'],\r\n            ['link', 'image']\r\n          ]\r\n        },\r\n        placeholder: '书写你的内容',\r\n        readOnly: false\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    value: {\r\n      handler (val) {\r\n        // 确认是新的值\r\n        if (val !== this.currentValue) {\r\n          this.currentValue = val\r\n          // 尝试更新\r\n          if (this.Quill) {\r\n            this.Quill.pasteHTML(this.value)\r\n          }\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  },\r\n  mounted () {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init () {\r\n      const editor = this.$refs.editor\r\n      // 初始化编辑器\r\n      this.Quill = new Quill(editor, this.options)\r\n      // 默认值\r\n      this.Quill.pasteHTML(this.currentValue)\r\n      // 绑定事件\r\n      this.Quill.on('text-change', (delta, oldDelta, source) => {\r\n        const html = this.$refs.editor.children[0].innerHTML\r\n        const text = this.Quill.getText()\r\n        const quill = this.Quill\r\n        // 更新内部的值\r\n        this.currentValue = html\r\n        // 发出事件 v-model\r\n        this.$emit('input', html)\r\n        // 发出事件\r\n        this.$emit('change', { html, text, quill })\r\n      })\r\n      // 将一些 quill 自带的事件传递出去\r\n      this.Quill.on('text-change', (delta, oldDelta, source) => {\r\n        this.$emit('text-change', delta, oldDelta, source)\r\n      })\r\n      this.Quill.on('selection-change', (range, oldRange, source) => {\r\n        this.$emit('selection-change', range, oldRange, source)\r\n      })\r\n      this.Quill.on('editor-change', (eventName, ...args) => {\r\n        this.$emit('editor-change', eventName, ...args)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}