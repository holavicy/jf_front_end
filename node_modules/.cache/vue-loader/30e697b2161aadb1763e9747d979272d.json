{"remainingRequest":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\jf_front_end\\src\\views\\jf\\staff\\components\\ADetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\workspace\\jf_front_end\\src\\views\\jf\\staff\\components\\ADetail\\index.vue","mtime":1595819592514},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2lzRW5kT3B0aW9uc30gZnJvbSAnQC9kYXRhRGljLmpzJyANCmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcycNCmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnYS1kZXRhaWwnLA0KICBwcm9wczogew0KICAgIGlzRW5kVmFsOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0NCiAgfSwNCg0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaXNFbmQ6IHRoaXMuaXNFbmRWYWwsDQogICAgICBpc0VuZE9wdGlvbnMsDQogICAgICBjaGVja0RhdGU6ICcnLA0KICAgICAgZGF0YTogW10sDQogICAgICBvcGVyYXRvcjogdXRpbC5jb29raWVzLmdldCgndXVpZCcpLA0KICAgICAgbmFtZTogdXRpbC5jb29raWVzLmdldCgnbmFtZScpLA0KICAgICAgcGFnaW5hdGlvbjogew0KICAgICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwLA0KICAgICAgICB0b3RhbDogMA0KICAgICAgfQ0KICAgIH0NCiAgfSwNCg0KICB3YXRjaDogew0KICAgIGlzRW5kVmFsOiBmdW5jdGlvbih2YWwpIHsNCiAgICAgIHRoaXMuaXNFbmQgPSB2YWw7DQogICAgICB0aGlzLmdldExpc3QodmFsKTsNCiAgICB9DQogIH0sDQoNCiAgLy8gbW91bnRlZCAoKSB7DQogIC8vICAgICB0aGlzLmdldExpc3QoKQ0KICAvLyB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBnZXRMaXN0IChpc0VuZFZhbCkgew0KICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsDQogICAgICAgICAgICBqb2JpZDogTnVtYmVyKHRoaXMub3BlcmF0b3IpLA0KICAgICAgICAgICAgaXNBY2NvdW50ZWQ6IGlzRW5kVmFsID09PSAn5ZCmJz8wOiBpc0VuZFZhbCA9PT0gJyc/Jyc6dGhpcy5pc0VuZD09PScnPycnOiBOdW1iZXIodGhpcy5pc0VuZCksDQogICAgICAgICAgICBiZWdpbkRhdGU6IHRoaXMuY2hlY2tEYXRlPyBkYXlqcyh0aGlzLmNoZWNrRGF0ZVswXSkuZm9ybWF0KCdZWVlZLU0tRCBISDptbTpzcycpIDonJywNCiAgICAgICAgICAgIGVuZERhdGU6IHRoaXMuY2hlY2tEYXRlPyBkYXlqcyh0aGlzLmNoZWNrRGF0ZVsxXSkuZW5kT2YoJ2RheScpLmZvcm1hdCgnWVlZWS1NLUQgSEg6bW06c3MnKSA6JycsDQogICAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2luYXRpb24uY3VycmVudFBhZ2UsDQogICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdpbmF0aW9uLnBhZ2VTaXplLA0KICAgICAgICAgICAgcmV3YXJkUG9pbnRzVHlwZTogIkHliIYiDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICAgICAgdGhpcy4kYXBpLkdFVF9ERVRBSUxfTElTVChkYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgICAgIHJlcy5kYXRhLmRldGFpbC5tYXAoKGl0ZW0pID0+IHsNCiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrRGF0ZSA9IGRheWpzKGl0ZW0uQXNzZXNzbWVudERhdGUpLmZvcm1hdCgnWVlZWS1NLUQnKQ0KICAgICAgICAgICAgICAgIGl0ZW0uaXNFbmQgPSBpdGVtLklzQWNjb3VudGVkID09PSAwPyAn5ZCmJzogJ+aYrycNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzLmRhdGEuZGV0YWlsDQogICAgICAgICAgICAgIHRoaXMucGFnaW5hdGlvbi50b3RhbCA9IHJlcy5kYXRhLnRvdGFsTGVuZ3RoDQogICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVycik7DQogICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgfSkNCiAgICB9LA0KDQogICAgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7DQogICAgICAgIHRoaXMucGFnaW5hdGlvbi5wYWdlU2l6ZSA9IHZhbDsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICAgIH0sDQogICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlICh2YWwpIHsNCiAgICAgICAgdGhpcy5wYWdpbmF0aW9uLmN1cnJlbnRQYWdlID0gdmFsOw0KICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/jf/staff/components/ADetail","sourcesContent":["<template>\r\n    <div class=\"a-detail\">\r\n      <div class=\"search-wrapper\">\r\n        <div class=\"search-item\">\r\n          <label>考核日期</label>\r\n          <el-date-picker\r\n            size=\"mini\"\r\n            v-model=\"checkDate\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\">\r\n          </el-date-picker>\r\n        </div>\r\n\r\n        <div class=\"search-item\">\r\n            <label>是否结算：</label><el-select v-model=\"isEnd\" placeholder=\"请选择\" size=\"mini\">\r\n                <el-option v-for=\"item in isEndOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n            </el-select>\r\n        </div>\r\n\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"getList\">查询</el-button>\r\n      </div>\r\n        <el-table :data=\"data\" size=\"mini\" stripe height=\"400\" style=\"margin-top: 20px\" v-loading=\"loading\">\r\n                <el-table-column type=\"index\" width=\"55\"></el-table-column>\r\n                <el-table-column prop=\"Name\" label=\"姓名\" width=\"80\"></el-table-column>\r\n                <el-table-column prop=\"Post\" label=\"职务名称\"></el-table-column>\r\n                <el-table-column prop=\"isEnd\" label=\"是否结算\" width=\"80\"></el-table-column>\r\n                <el-table-column prop=\"BonusPoints\" label=\"加分\" width=\"60\"></el-table-column>\r\n                <el-table-column prop=\"MinusPoints\" label=\"减分\" width=\"60\"></el-table-column>\r\n                <el-table-column prop=\"Reason\" label=\"加减分理由\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"Proof\" label=\"加减分依据\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"ReasonType\" label=\"理由分类\" width=\"120\"></el-table-column>\r\n                <el-table-column prop=\"checkDate\" label=\"考核日期\" width=\"120\"></el-table-column>\r\n            </el-table>\r\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pagination.currentPage\" :page-sizes=\"[1, 5, 10, 20, 50, 100]\" :page-size=\"pagination.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"pagination.total\" style=\"margin-top:10px\"></el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {isEndOptions} from '@/dataDic.js' \r\nimport dayjs from 'dayjs'\r\nimport util from '@/libs/util.js'\r\nexport default {\r\n  name: 'a-detail',\r\n  props: {\r\n    isEndVal: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      isEnd: this.isEndVal,\r\n      isEndOptions,\r\n      checkDate: '',\r\n      data: [],\r\n      operator: util.cookies.get('uuid'),\r\n      name: util.cookies.get('name'),\r\n      pagination: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        total: 0\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    isEndVal: function(val) {\r\n      this.isEnd = val;\r\n      this.getList(val);\r\n    }\r\n  },\r\n\r\n  // mounted () {\r\n  //     this.getList()\r\n  // },\r\n\r\n  methods: {\r\n    getList (isEndVal) {\r\n      let data = {\r\n            name: this.name,\r\n            jobid: Number(this.operator),\r\n            isAccounted: isEndVal === '否'?0: isEndVal === ''?'':this.isEnd===''?'': Number(this.isEnd),\r\n            beginDate: this.checkDate? dayjs(this.checkDate[0]).format('YYYY-M-D HH:mm:ss') :'',\r\n            endDate: this.checkDate? dayjs(this.checkDate[1]).endOf('day').format('YYYY-M-D HH:mm:ss') :'',\r\n            page: this.pagination.currentPage,\r\n            pageSize: this.pagination.pageSize,\r\n            rewardPointsType: \"A分\"\r\n          }\r\n          this.loading = true;\r\n          this.$api.GET_DETAIL_LIST(data).then(res => {\r\n              this.loading = false\r\n              res.data.detail.map((item) => {\r\n                item.checkDate = dayjs(item.AssessmentDate).format('YYYY-M-D')\r\n                item.isEnd = item.IsAccounted === 0? '否': '是'\r\n              })\r\n              this.data = res.data.detail\r\n              this.pagination.total = res.data.totalLength\r\n          }).catch(err => {\r\n              console.log('err', err);\r\n              this.loading = false\r\n          })\r\n    },\r\n\r\n    handleSizeChange (val) {\r\n        this.pagination.pageSize = val;\r\n        this.getList()\r\n      },\r\n      handleCurrentChange (val) {\r\n        this.pagination.currentPage = val;\r\n        this.getList()\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.search-wrapper{\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .search-item{\r\n    margin-right: 20px;\r\n    label{\r\n      margin-right: 10px;\r\n      font-size: 14px;\r\n      color: #101010;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}