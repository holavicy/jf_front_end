{"remainingRequest":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\jf_front_end\\src\\views\\jf\\staff\\components\\ADetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\workspace\\jf_front_end\\src\\views\\jf\\staff\\components\\ADetail\\index.vue","mtime":1595409849073},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\workspace\\jf_front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2lzRW5kT3B0aW9uc30gZnJvbSAnQC9kYXRhRGljLmpzJyANCmltcG9ydCB7QURldGFpbFN0YWZmfSBmcm9tICdAL21vY2tEYXRhLmpzJw0KaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJw0KaW1wb3J0IHV0aWwgZnJvbSAnQC9saWJzL3V0aWwuanMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdhLWRldGFpbCcsDQogIHByb3BzOiB7DQogICAgaXNFbmRWYWw6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfQ0KICB9LA0KDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBBRGV0YWlsU3RhZmYsDQogICAgICBpc0VuZDogdGhpcy5pc0VuZFZhbCwNCiAgICAgIGlzRW5kT3B0aW9ucywNCiAgICAgIGNoZWNrRGF0ZTogJycsDQogICAgICBkYXRhOiBbXSwNCiAgICAgIG9wZXJhdG9yOiB1dGlsLmNvb2tpZXMuZ2V0KCd1dWlkJyksDQogICAgICBuYW1lOiB1dGlsLmNvb2tpZXMuZ2V0KCduYW1lJyksDQogICAgICBwYWdpbmF0aW9uOiB7DQogICAgICAgIGN1cnJlbnRQYWdlOiAwLA0KICAgICAgICBwYWdlU2l6ZTogMTAsDQogICAgICAgIHRvdGFsOiA0DQogICAgICB9DQogICAgfQ0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgaXNFbmRWYWw6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgdGhpcy5pc0VuZCA9IHZhbDsNCiAgICAgIHRoaXMuZ2V0TGlzdCh2YWwpOw0KICAgIH0NCiAgfSwNCg0KICBtb3VudGVkICgpIHsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpDQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGdldExpc3QgKGlzRW5kVmFsKSB7DQogICAgICBsZXQgZGF0YSA9IHsNCiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwNCiAgICAgICAgICAgIGpvYmlkOiBOdW1iZXIodGhpcy5vcGVyYXRvciksDQogICAgICAgICAgICBpc0FjY291bnRlZDogaXNFbmRWYWwgPT09ICfmmK8nPzE6IGlzRW5kVmFsID09PSAnJz8nJzp0aGlzLmlzRW5kPT09Jyc/Jyc6IE51bWJlcih0aGlzLmlzRW5kKSwNCiAgICAgICAgICAgIGJlZ2luRGF0ZTogdGhpcy5jaGVja0RhdGU/IGRheWpzKHRoaXMuY2hlY2tEYXRlWzBdKS5mb3JtYXQoJ1lZWVktTS1EIEhIOm1tOnNzJykgOicnLA0KICAgICAgICAgICAgZW5kRGF0ZTogdGhpcy5jaGVja0RhdGU/IGRheWpzKHRoaXMuY2hlY2tEYXRlWzFdKS5lbmRPZignZGF5JykuZm9ybWF0KCdZWVlZLU0tRCBISDptbTpzcycpIDonJywNCiAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnaW5hdGlvbi5jdXJyZW50UGFnZSwNCiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2luYXRpb24ucGFnZVNpemUNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgICB0aGlzLiRhcGkuR0VUX0RFVEFJTF9MSVNUKGRhdGEpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICAgICAgcmVzLmRhdGEuZGV0YWlsLm1hcCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tEYXRlID0gZGF5anMoaXRlbS5Bc3Nlc3NtZW50RGF0ZSkuZm9ybWF0KCdZWVlZLU0tRCcpDQogICAgICAgICAgICAgICAgaXRlbS5pc0VuZCA9IGl0ZW0uaXNBY2NvdW50ZWQgPT09IDA/ICflkKYnOiAn5pivJw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB0aGlzLmRhdGEgPSByZXMuZGF0YS5kZXRhaWwNCiAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0aW9uLnRvdGFsID0gcmVzLmRhdGEudG90YWxMZW5ndGgNCiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyKTsNCiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/jf/staff/components/ADetail","sourcesContent":["<template>\r\n    <div class=\"a-detail\">\r\n      <div class=\"search-wrapper\">\r\n        <div class=\"search-item\">\r\n          <label>考核日期</label>\r\n          <el-date-picker\r\n            size=\"mini\"\r\n            v-model=\"checkDate\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\">\r\n          </el-date-picker>\r\n        </div>\r\n\r\n        <div class=\"search-item\">\r\n            <label>是否结算：</label><el-select v-model=\"isEnd\" placeholder=\"请选择\" size=\"mini\">\r\n                <el-option v-for=\"item in isEndOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n            </el-select>\r\n        </div>\r\n\r\n        <el-button type=\"primary\" size=\"mini\" @click=\"getList\">查询</el-button>\r\n      </div>\r\n        <el-table :data=\"data\" size=\"mini\" stripe height=\"400\" style=\"margin-top: 20px\" v-loading=\"loading\">\r\n                <el-table-column type=\"index\" width=\"55\"></el-table-column>\r\n                <el-table-column prop=\"Name\" label=\"姓名\" width=\"80\"></el-table-column>\r\n                <el-table-column prop=\"Post\" label=\"职务名称\"></el-table-column>\r\n                <el-table-column prop=\"isEnd\" label=\"是否结算\" width=\"80\"></el-table-column>\r\n                <el-table-column prop=\"BonusPoints\" label=\"加分\" width=\"60\"></el-table-column>\r\n                <el-table-column prop=\"MinusPoints\" label=\"减分\" width=\"60\"></el-table-column>\r\n                <el-table-column prop=\"Reason\" label=\"加减分理由\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"Proof\" label=\"加减分依据\" width=\"180\"></el-table-column>\r\n                <el-table-column prop=\"ReasonType\" label=\"理由分类\" width=\"120\"></el-table-column>\r\n                <el-table-column prop=\"checkDate\" label=\"考核日期\" width=\"120\"></el-table-column>\r\n            </el-table>\r\n            <!-- <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pagination.currentPage\" :page-sizes=\"[5, 10, 20, 50, 100]\" :page-size=\"pagination.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"pagination.total\" style=\"margin-top:10px\"></el-pagination> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {isEndOptions} from '@/dataDic.js' \r\nimport {ADetailStaff} from '@/mockData.js'\r\nimport dayjs from 'dayjs'\r\nimport util from '@/libs/util.js'\r\nexport default {\r\n  name: 'a-detail',\r\n  props: {\r\n    isEndVal: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      ADetailStaff,\r\n      isEnd: this.isEndVal,\r\n      isEndOptions,\r\n      checkDate: '',\r\n      data: [],\r\n      operator: util.cookies.get('uuid'),\r\n      name: util.cookies.get('name'),\r\n      pagination: {\r\n        currentPage: 0,\r\n        pageSize: 10,\r\n        total: 4\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    isEndVal: function(val) {\r\n      this.isEnd = val;\r\n      this.getList(val);\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n      this.getList()\r\n  },\r\n\r\n  methods: {\r\n    getList (isEndVal) {\r\n      let data = {\r\n            name: this.name,\r\n            jobid: Number(this.operator),\r\n            isAccounted: isEndVal === '是'?1: isEndVal === ''?'':this.isEnd===''?'': Number(this.isEnd),\r\n            beginDate: this.checkDate? dayjs(this.checkDate[0]).format('YYYY-M-D HH:mm:ss') :'',\r\n            endDate: this.checkDate? dayjs(this.checkDate[1]).endOf('day').format('YYYY-M-D HH:mm:ss') :'',\r\n            page: this.pagination.currentPage,\r\n            pageSize: this.pagination.pageSize\r\n          }\r\n          this.loading = true;\r\n          this.$api.GET_DETAIL_LIST(data).then(res => {\r\n              this.loading = false\r\n              res.data.detail.map((item) => {\r\n                item.checkDate = dayjs(item.AssessmentDate).format('YYYY-M-D')\r\n                item.isEnd = item.isAccounted === 0? '否': '是'\r\n              })\r\n              this.data = res.data.detail\r\n              this.pagination.total = res.data.totalLength\r\n          }).catch(err => {\r\n              console.log('err', err);\r\n              this.loading = false\r\n          })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.search-wrapper{\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  .search-item{\r\n    margin-right: 20px;\r\n    label{\r\n      margin-right: 10px;\r\n      font-size: 14px;\r\n      color: #101010;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}